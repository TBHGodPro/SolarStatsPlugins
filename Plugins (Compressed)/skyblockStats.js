(()=>{function e(e){return e.replace(/_/gi," ").split(" ").map((e=>e[0].toUpperCase()+e.substr(1).toLowerCase())).join(" ")}const a=[{level:1,commonTotal:100,uncommonTotal:765,rareTotal:1820,epicTotal:3485,legendaryTotal:5555},{level:2,commonTotal:210,uncommonTotal:940,rareTotal:2095,epicTotal:3925,legendaryTotal:6215},{level:3,commonTotal:330,uncommonTotal:1130,rareTotal:2395,epicTotal:4415,legendaryTotal:6945},{level:4,commonTotal:460,uncommonTotal:1340,rareTotal:2725,epicTotal:4955,legendaryTotal:7745},{level:5,commonTotal:605,uncommonTotal:1570,rareTotal:3085,epicTotal:5555,legendaryTotal:8625},{level:6,commonTotal:765,uncommonTotal:1820,rareTotal:3485,epicTotal:6215,legendaryTotal:9585},{level:7,commonTotal:940,uncommonTotal:2095,rareTotal:3925,epicTotal:6945,legendaryTotal:10635},{level:8,commonTotal:1130,uncommonTotal:2395,rareTotal:4415,epicTotal:7745,legendaryTotal:11785},{level:9,commonTotal:1340,uncommonTotal:2725,rareTotal:4955,epicTotal:8625,legendaryTotal:13045},{level:10,commonTotal:1570,uncommonTotal:3085,rareTotal:5555,epicTotal:9585,legendaryTotal:14425},{level:11,commonTotal:1820,uncommonTotal:3485,rareTotal:6215,epicTotal:10635,legendaryTotal:15935},{level:12,commonTotal:2095,uncommonTotal:3925,rareTotal:6945,epicTotal:11785,legendaryTotal:17585},{level:13,commonTotal:2395,uncommonTotal:4415,rareTotal:7745,epicTotal:13045,legendaryTotal:19385},{level:14,commonTotal:2725,uncommonTotal:4955,rareTotal:8625,epicTotal:14425,legendaryTotal:21345},{level:15,commonTotal:3085,uncommonTotal:5555,rareTotal:9585,epicTotal:15935,legendaryTotal:23475},{level:16,commonTotal:3485,uncommonTotal:6215,rareTotal:10635,epicTotal:17585,legendaryTotal:25785},{level:17,commonTotal:3925,uncommonTotal:6945,rareTotal:11785,epicTotal:19385,legendaryTotal:28285},{level:18,commonTotal:4415,uncommonTotal:7745,rareTotal:13045,epicTotal:21345,legendaryTotal:30985},{level:19,commonTotal:4955,uncommonTotal:8625,rareTotal:14425,epicTotal:23475,legendaryTotal:33905},{level:20,commonTotal:5555,uncommonTotal:9585,rareTotal:15935,epicTotal:25785,legendaryTotal:37065},{level:21,commonTotal:6215,uncommonTotal:10635,rareTotal:17585,epicTotal:28285,legendaryTotal:40485},{level:22,commonTotal:6945,uncommonTotal:11785,rareTotal:19385,epicTotal:30985,legendaryTotal:44185},{level:23,commonTotal:7745,uncommonTotal:13045,rareTotal:21345,epicTotal:33905,legendaryTotal:48185},{level:24,commonTotal:8625,uncommonTotal:14425,rareTotal:23475,epicTotal:37065,legendaryTotal:52535},{level:25,commonTotal:9585,uncommonTotal:15935,rareTotal:25785,epicTotal:40485,legendaryTotal:57285},{level:26,commonTotal:10635,uncommonTotal:17585,rareTotal:28285,epicTotal:44185,legendaryTotal:62485},{level:27,commonTotal:11785,uncommonTotal:19385,rareTotal:30985,epicTotal:48185,legendaryTotal:68185},{level:28,commonTotal:13045,uncommonTotal:21345,rareTotal:33905,epicTotal:52535,legendaryTotal:74485},{level:29,commonTotal:14425,uncommonTotal:23475,rareTotal:37065,epicTotal:57285,legendaryTotal:81485},{level:30,commonTotal:15935,uncommonTotal:25785,rareTotal:40485,epicTotal:62485,legendaryTotal:89285},{level:31,commonTotal:17585,uncommonTotal:28285,rareTotal:44185,epicTotal:68185,legendaryTotal:97985},{level:32,commonTotal:19385,uncommonTotal:30985,rareTotal:48185,epicTotal:74485,legendaryTotal:107685},{level:33,commonTotal:21345,uncommonTotal:33905,rareTotal:52535,epicTotal:81485,legendaryTotal:118485},{level:34,commonTotal:23475,uncommonTotal:37065,rareTotal:57285,epicTotal:89285,legendaryTotal:130485},{level:35,commonTotal:25785,uncommonTotal:40485,rareTotal:62485,epicTotal:97985,legendaryTotal:143785},{level:36,commonTotal:28285,uncommonTotal:44185,rareTotal:68185,epicTotal:107685,legendaryTotal:158485},{level:37,commonTotal:30985,uncommonTotal:48185,rareTotal:74485,epicTotal:118485,legendaryTotal:174685},{level:38,commonTotal:33905,uncommonTotal:52535,rareTotal:81485,epicTotal:130485,legendaryTotal:192485},{level:39,commonTotal:37065,uncommonTotal:57285,rareTotal:89285,epicTotal:143785,legendaryTotal:211985},{level:40,commonTotal:40485,uncommonTotal:62485,rareTotal:97985,epicTotal:158485,legendaryTotal:233285},{level:41,commonTotal:44185,uncommonTotal:68185,rareTotal:107685,epicTotal:174685,legendaryTotal:256485},{level:42,commonTotal:48185,uncommonTotal:74485,rareTotal:118485,epicTotal:192485,legendaryTotal:281685},{level:43,commonTotal:52535,uncommonTotal:81485,rareTotal:130485,epicTotal:211985,legendaryTotal:309085},{level:44,commonTotal:57285,uncommonTotal:89285,rareTotal:143785,epicTotal:233285,legendaryTotal:338885},{level:45,commonTotal:62485,uncommonTotal:97985,rareTotal:158485,epicTotal:256485,legendaryTotal:371285},{level:46,commonTotal:68185,uncommonTotal:107685,rareTotal:174685,epicTotal:281685,legendaryTotal:406485},{level:47,commonTotal:74485,uncommonTotal:118485,rareTotal:192485,epicTotal:309085,legendaryTotal:444685},{level:48,commonTotal:81485,uncommonTotal:130485,rareTotal:211985,epicTotal:338885,legendaryTotal:486085},{level:49,commonTotal:89285,uncommonTotal:143785,rareTotal:233285,epicTotal:371285,legendaryTotal:530885},{level:50,commonTotal:97985,uncommonTotal:158485,rareTotal:256485,epicTotal:406485,legendaryTotal:579285},{level:51,commonTotal:107685,uncommonTotal:174685,rareTotal:281685,epicTotal:444685,legendaryTotal:631485},{level:52,commonTotal:118485,uncommonTotal:192485,rareTotal:309085,epicTotal:486085,legendaryTotal:687685},{level:53,commonTotal:130485,uncommonTotal:211985,rareTotal:338885,epicTotal:530885,legendaryTotal:748085},{level:54,commonTotal:143785,uncommonTotal:233285,rareTotal:371285,epicTotal:579285,legendaryTotal:812885},{level:55,commonTotal:158485,uncommonTotal:256485,rareTotal:406485,epicTotal:631485,legendaryTotal:882285},{level:56,commonTotal:174685,uncommonTotal:281685,rareTotal:444685,epicTotal:687685,legendaryTotal:956485},{level:57,commonTotal:192485,uncommonTotal:309085,rareTotal:486085,epicTotal:748085,legendaryTotal:1035685},{level:58,commonTotal:211985,uncommonTotal:338885,rareTotal:530885,epicTotal:812885,legendaryTotal:1120385},{level:59,commonTotal:233285,uncommonTotal:371285,rareTotal:579285,epicTotal:882285,legendaryTotal:1211085},{level:60,commonTotal:256485,uncommonTotal:406485,rareTotal:631485,epicTotal:956485,legendaryTotal:1308285},{level:61,commonTotal:281685,uncommonTotal:444685,rareTotal:687685,epicTotal:1035685,legendaryTotal:1412485},{level:62,commonTotal:309085,uncommonTotal:486085,rareTotal:748085,epicTotal:1120385,legendaryTotal:1524185},{level:63,commonTotal:338885,uncommonTotal:530885,rareTotal:812885,epicTotal:1211085,legendaryTotal:1643885},{level:64,commonTotal:371285,uncommonTotal:579285,rareTotal:882285,epicTotal:1308285,legendaryTotal:1772085},{level:65,commonTotal:406485,uncommonTotal:631485,rareTotal:956485,epicTotal:1412485,legendaryTotal:1909285},{level:66,commonTotal:444685,uncommonTotal:687685,rareTotal:1035685,epicTotal:1524185,legendaryTotal:2055985},{level:67,commonTotal:486085,uncommonTotal:748085,rareTotal:1120385,epicTotal:1643885,legendaryTotal:2212685},{level:68,commonTotal:530885,uncommonTotal:812885,rareTotal:1211085,epicTotal:1772085,legendaryTotal:2380385},{level:69,commonTotal:579285,uncommonTotal:882285,rareTotal:1308285,epicTotal:1909285,legendaryTotal:2560085},{level:70,commonTotal:631485,uncommonTotal:956485,rareTotal:1412485,epicTotal:2055985,legendaryTotal:2752785},{level:71,commonTotal:687685,uncommonTotal:1035685,rareTotal:1524185,epicTotal:2212685,legendaryTotal:2959485},{level:72,commonTotal:748085,uncommonTotal:1120385,rareTotal:1643885,epicTotal:2380385,legendaryTotal:3181185},{level:73,commonTotal:812885,uncommonTotal:1211085,rareTotal:1772085,epicTotal:2560085,legendaryTotal:3418885},{level:74,commonTotal:882285,uncommonTotal:1308285,rareTotal:1909285,epicTotal:2752785,legendaryTotal:3673585},{level:75,commonTotal:956485,uncommonTotal:1412485,rareTotal:2055985,epicTotal:2959485,legendaryTotal:3946285},{level:76,commonTotal:1035685,uncommonTotal:1524185,rareTotal:2212685,epicTotal:3181185,legendaryTotal:4237985},{level:77,commonTotal:1120385,uncommonTotal:1643885,rareTotal:2380385,epicTotal:3418885,legendaryTotal:4549685},{level:78,commonTotal:1211085,uncommonTotal:1772085,rareTotal:2560085,epicTotal:3673585,legendaryTotal:4883385},{level:79,commonTotal:1308285,uncommonTotal:1909285,rareTotal:2752785,epicTotal:3946285,legendaryTotal:5241085},{level:80,commonTotal:1412485,uncommonTotal:2055985,rareTotal:2959485,epicTotal:4237985,legendaryTotal:5624785},{level:81,commonTotal:1524185,uncommonTotal:2212685,rareTotal:3181185,epicTotal:4549685,legendaryTotal:6036485},{level:82,commonTotal:1643885,uncommonTotal:2380385,rareTotal:3418885,epicTotal:4883385,legendaryTotal:6478185},{level:83,commonTotal:1772085,uncommonTotal:2560085,rareTotal:3673585,epicTotal:5241085,legendaryTotal:6954885},{level:84,commonTotal:1909285,uncommonTotal:2752785,rareTotal:3946285,epicTotal:5624785,legendaryTotal:7471585},{level:85,commonTotal:2055985,uncommonTotal:2959485,rareTotal:4237985,epicTotal:6036485,legendaryTotal:8033285},{level:86,commonTotal:2212685,uncommonTotal:3181185,rareTotal:4549685,epicTotal:6478185,legendaryTotal:8644985},{level:87,commonTotal:2380385,uncommonTotal:3418885,rareTotal:4883385,epicTotal:6954885,legendaryTotal:9311685},{level:88,commonTotal:2560085,uncommonTotal:3673585,rareTotal:5241085,epicTotal:7471585,legendaryTotal:10038385},{level:89,commonTotal:2752785,uncommonTotal:3946285,rareTotal:5624785,epicTotal:8033285,legendaryTotal:10830085},{level:90,commonTotal:2959485,uncommonTotal:4237985,rareTotal:6036485,epicTotal:8644985,legendaryTotal:11691785},{level:91,commonTotal:3181185,uncommonTotal:4549685,rareTotal:6478185,epicTotal:9311685,legendaryTotal:12628485},{level:92,commonTotal:3418885,uncommonTotal:4883385,rareTotal:6954885,epicTotal:10038385,legendaryTotal:13645185},{level:93,commonTotal:3673585,uncommonTotal:5241085,rareTotal:7471585,epicTotal:10830085,legendaryTotal:14746885},{level:94,commonTotal:3946285,uncommonTotal:5624785,rareTotal:8033285,epicTotal:11691785,legendaryTotal:15938585},{level:95,commonTotal:4237985,uncommonTotal:6036485,rareTotal:8644985,epicTotal:12628485,legendaryTotal:17225285},{level:96,commonTotal:4549685,uncommonTotal:6478185,rareTotal:9311685,epicTotal:13645185,legendaryTotal:18611985},{level:97,commonTotal:4883385,uncommonTotal:6954885,rareTotal:10038385,epicTotal:14746885,legendaryTotal:20108685},{level:98,commonTotal:5241085,uncommonTotal:7471585,rareTotal:10830085,epicTotal:15938585,legendaryTotal:21725385},{level:99,commonTotal:5624785,uncommonTotal:8033285,rareTotal:11691785,epicTotal:17225285,legendaryTotal:23472085},{level:100,commonTotal:6036485,uncommonTotal:8644985,rareTotal:12628485,epicTotal:18611985,legendaryTotal:25358785}];function o(o){var l=a.find((e=>e[`${o.tier.toLowerCase()}Total`]>o.exp))??a.find((e=>100==e.level));o.tier=o.tier.toUpperCase();var t="§";return"COMMON"==o.tier?t+="f":"UNCOMMON"==o.tier?t+="a":"RARE"==o.tier?t+="9":"EPIC"==o.tier?t+="5":"LEGENDARY"==o.tier?t+="6":"MYTHIC"==o.tier?t+="d":t+="7",`§7[Lvl ${l?.level??"§cERROR"}§7] ${t}${e(o.type)}`}const l=requireModule("prismarine-nbt"),{Buffer:t}=requireModule("node:buffer");async function n(e){return(await l.parse(t.from(e,"base64"))).parsed.value.i.value.value}__dirname.split("/").splice(0,__dirname.split("/").length-2).join("/");var r=new Intl.RelativeTimeFormat("en",{numeric:"auto"});const i=requireModule("node-fetch"),m=async(e,a)=>{e.startsWith("http")||(e=(e=`https://api.hypixel.net${e.startsWith("/")?e:`/${e}`}`).includes("?")?`${e}&key=${y}`:`${e}?key=${y}`),a=await i(e,a),a=await a.text();try{a=JSON.parse(a)}catch{}return a},{Logger:T,Command:s,Item:u,Inventory:c,getConfigSync:d}=toolbox,{InventoryType:v}=requireModule("../Types"),p=d(),{apiKey:y}=p,g=new s("sb",[{argument:"type",required:!1,type:"string"},{argument:"extra",required:!1,type:"string"}],["skyblock"]);async function f(e){return await m(`https://api.mojang.com/users/profiles/minecraft/${e}`)}function w(e){player.sendMessage(`\n    ${e}\n`)}var N={help:"Shows This Help Menu",stats:"Shows A Lot Of Stats About A Player",purse:"Shows The Purse Of A Player"},h=`\n    §2Skyblock Helper (§6/sb §3<command name>§2)\n    \n    ${Object.keys(N).map((e=>`§3${e.toUpperCase()}§6: §r${N[e]}`)).join("\n    ")}\n`;async function b(a,l,t,i,T,s){var d=t;if(!s)var{id:s}=await f(T);let p=null;switch(l){case 1:for(var y of Object.keys(t.members)){t.members[y].id=y;var g=await m(`https://api.mojang.com/user/profiles/${y}/names`);t.members[y].username=g[g.length-1].name,t.members[y].names=g.filter((e=>e.name!=t.members[y].username)).reverse()}p=new c(v.CONTAINER,`§3Stats §8- §6${T} §8- §2${t.cute_name}`,63);var w=Object.keys(t.members).length;switch(w){case 1:w=[5];break;case 2:w=[4,6];break;case 3:w=[3,5,7];break;case 4:w=[2,4,6,8];break;case 5:w=[1,3,5,7,9];break;case 6:w=[1,3,4,6,7,9];break;case 7:w=[1,3,4,5,6,7,9];break;case 8:w=[1,2,3,4,6,7,8,9];break;default:w=[1,2,3,4,5,6,7,8,9]}var N=[];for(var y of Object.values(t.members)){var h=N.length;if(Object.values(t.members).indexOf(y)>8){var I=new u(166);I.displayName="§c§lERROR:",I.lore=["§cThere Are More Players In This Profile's History","§cBut There Are Too Many To Display In This Menu."],p.addItem(I,p.slotCount-8);break}var O=new u(397);O.meta=3,O.displayName=`§6§l${y.username}`;var $=[];const e=e=>{for(var a of($.push(""),"string"==typeof e&&(e=[e]),e))$.push(a)};e(`§3§lPurse: §r§e${(Math.round(10*y.coin_purse)/10).toLocaleString()}`),e(`§3§lFairy Souls: §r§5${y.fairy_souls_collected??"UNKOWN"}`),y.names.length>1&&e(["§3§lName History§6:",...y.names.map((e=>` - §r§6${e.name}`))]);var k=y.pets?.find((e=>e?.active));k&&e(`§3§lActive Pet: ${o(k)}`),$.push(""),O.lore=$;var C=new u(321);if(C.displayName="§3§lView Inventories",C.lore=["",`§3Inventories Of §6${y.username}`,""],y.inv_armor?.data){var D=await n(y.inv_armor.data),S=D[3],_=D[2],P=D[1],R=D[0];if(S?.id){var L=new u(S.id.value,S.Count.value);S.Damage.value&&(L.meta=S.Damage.value),L.displayName=S.tag.value.display.value.Name.value,L.lore=S.tag.value.display.value.Lore.value.value}if(_?.id){var E=new u(_.id.value,_.Count.value);_.Damage.value&&(E.meta=_.Damage.value),E.displayName=_.tag.value.display.value.Name.value,E.lore=_.tag.value.display.value.Lore.value.value}if(P?.id){var A=new u(P.id.value,P.Count.value);P.Damage.value&&(A.meta=P.Damage.value),A.displayName=P.tag.value.display.value.Name.value,A.lore=P.tag.value.display.value.Lore.value.value}if(R?.id){var M=new u(R.id.value,R.Count.value);R.Damage.value&&(M.meta=R.Damage.value),M.displayName=R.tag.value.display.value.Name.value,M.lore=R.tag.value.display.value.Lore.value.value}}N[h]=[O,C,...L?[L]:[],...E?[E]:[],...A?[A]:[],...M?[M]:[]]}for(var F of N)p.addItems(F.map(((e,a)=>({item:e,position:w[N.indexOf(F)]-1+9*a}))));var W=new u(130);if(t.banking){W.displayName=`§6§lBank: §e§l${Math.round(t.banking.balance).toLocaleString()}`,W.lore=[""];var x=t.banking.transactions.reverse();for(var h of("WITHDRAW"==x[0].action&&x[0].amount>0&&(x[0].amount=parseFloat(`-${x[0].amount}`)),"DEPOSIT"==x[0].action&&x[0].amount<0&&(x[0].amount=Math.abs(x[0].amount)),x)){var U=x.indexOf(h);if(x[U+1]&&x[U+1].initiator_name==h.initiator_name)"WITHDRAW"==x[U+1].action&&x[U+1].amount>0&&(x[U+1].amount=parseFloat(`-${x[U+1].amount}`)),"DEPOSIT"==x[U+1].action&&x[U+1].amount<0&&(x[U+1].amount=Math.abs(x[U+1].amount)),x[U+1].amount=x[U+1].amount+h.amount;else if(h.amount){for(var V=[864e5,36e5,6e4,1e3],H=["day","hour","minute","second"],j=[Math.round((h.timestamp-(new Date).getTime())/V[0]),H[0]],q=1;(0==j[0]||1==j[0]||-1==j[0])&&q<4;)j=[Math.round((h.timestamp-(new Date).getTime())/V[q]),H[q]],q+=1;W.lore.push(`${h.amount>0?"§a+":"§c-"} §6${Math.round(Math.abs(h.amount)).toLocaleString()}§7, §e${r.format(parseInt(j[0]),[j[1]])} §7by ${h.initiator_name}`)}}W.lore.push("")}else W.displayName="§6§lBank: §cThe §4Banking API §cIs §4OFF §cFor This Profile";p.addItem(W,p.slotCount-1);var B=new u(357),J=t.community_upgrades?.currently_upgrading;if(J){for(V=[864e5,36e5,6e4,1e3],H=["day","hour","minute","second"],j=[Math.round((J.start_ms-(new Date).getTime())/V[0]),H[0]],q=1;(0==j[0]||1==j[0]||-1==j[0])&&q<4;)j=[Math.round((J.start_ms-(new Date).getTime())/V[q]),H[q]],q+=1;B.displayName=`§3§lCommunity Upgrades: §2§l${e(J.upgrade)} §6§l${J.new_tier}`,B.lore=["",`§3Started §6${r.format(j[0],j[1])} §3By §6${t.members[J.who_started]?.username??"§r§cUNKOWN"}`]}else B.displayName="§3§lCommunity Upgrades: §rThere Is Nothing Currently Upgrading";p.addItem(B,p.slotCount-2);break;case 2:p=new c(v.CONTAINER,`§3Stats §8- §3Inventories Of §6${T}`,18);var Y=new u(321);Y.displayName="§3View Inventory",t.inv_contents||(Y.lore=["","§cThis Player Has The §4Inventory §cAPI Setting §4OFF",""]);var G=new u(145);G.displayName="§3View Accessory Bag",t.talisman_bag||(G.lore=["","§cThis Player Has The §4Inventory §cAPI Setting §4OFF",""]);var K=new u(299);K.displayName="§3View Wardrobe",t.wardrobe_contents||(K.lore=["","§cThis Player Has The §4Inventory §cAPI Setting §4OFF",""]);var z=new u(54);z.displayName="§3View Personal Vault",t.personal_vault_contents||(z.lore=["","§cThis Player Has The §4Personal Bank Vault §cAPI Setting §4OFF",""]),p.addItems([{item:Y,position:"0"},{item:G,position:"1"},{item:K,position:"2"},{item:z,position:"3"}]);break;case 3:p=new c(v.CONTAINER,`§3Stats §8- §3Inventory Of §6${T}`,45);var Q=[];for(var X of t)if(X.id){var Z=new u(X.id.value,X.Count.value);if(X.Damage.value&&(Z.meta=X.Damage.value),Z.displayName=X.tag.value.display.value.Name.value,Z.lore=X.tag.value.display.value.Lore.value.value,t.indexOf(X)<9)var ee=t.indexOf(X)+27;else ee=t.indexOf(X)-9;Q[Q.length]={item:Z,position:ee.toString()}}p.addItems(Q);break;case 4:t=t.filter((e=>e?.id?.value));var ae=["VERY SPECIAL","SPECIAL","DIVINE","MYTHIC","LEGENDARY","EPIC","RARE","UNCOMMON","COMMON"];for(var X of(t=(t=t.sort(((e,a)=>{var o=ae.indexOf(e.tag.value.display.value.Lore.value.value[e.tag.value.display.value.Lore.value.value.length-1].split(" ")[0].substr(4).toUpperCase()),l=ae.indexOf(a.tag.value.display.value.Lore.value.value[a.tag.value.display.value.Lore.value.value.length-1].split(" ")[0].substr(4).toUpperCase());return o>l?1:o<l?-1:0}))).slice(0,45),p=new c(v.CONTAINER,`§3Stats §8- Accessory Bag Of §6${T}`,54),Q=[],t))X.id&&(Z=new u(X.id.value,X.Count.value),X.Damage.value&&(Z.meta=X.Damage.value),Z.displayName=X.tag.value.display.value.Name.value,Z.lore=X.tag.value.display.value.Lore.value.value,Q[Q.length]={item:Z,position:t.indexOf(X).toString()});if(45==t.length){var oe=new u(137);oe.displayName=`§3+§6§l${d.filter((e=>e?.id?.value)).length-45} §r§3More`,oe.lore=[`§3§o+§6§o§l${d.length-45} §r§3§oMore Slots`,`§6§o§l${d.length} §r§3§oTotal Slots`],p.addItem(oe,53)}p.addItems(Q);break;case 5:for(var X of(p=new c(v.CONTAINER,`§3Stats §8- Wardrobe Of §6${T}`,54),Q=[],t.data.slice(0,36)))X.id&&(Z=new u(X.id.value,X.Count.value),X.Damage.value&&(Z.meta=X.Damage.value),Z.displayName=X.tag.value.display.value.Name.value,Z.lore=X.tag.value.display.value.Lore.value.value,Q[Q.length]={item:Z,position:t.data.indexOf(X).toString()});for(h=0;h<9;h++){var le=new u(351);t.equipped==h+1?(le.meta="10",le.displayName=`Slot ${h+1}: §aEquipped`,S=t.current[3],_=t.current[2],P=t.current[1],R=t.current[0],S?.id&&(L=new u(S.id.value,S.Count.value),S.Damage.value&&(L.meta=S.Damage.value),L.displayName=S.tag.value.display.value.Name.value,L.lore=S.tag.value.display.value.Lore.value.value,p.addItem(L,h)),_?.id&&(E=new u(_.id.value,_.Count.value),_.Damage.value&&(E.meta=_.Damage.value),E.displayName=_.tag.value.display.value.Name.value,E.lore=_.tag.value.display.value.Lore.value.value,p.addItem(E,h+9)),P?.id&&(A=new u(P.id.value,P.Count.value),_.Damage.value&&(A.meta=P.Damage.value),A.displayName=P.tag.value.display.value.Name.value,A.lore=P.tag.value.display.value.Lore.value.value,p.addItem(A,h+18)),R?.id&&(M=new u(R.id.value,R.Count.value),_.Damage.value&&(M.meta=R.Damage.value),M.displayName=R.tag.value.display.value.Name.value,M.lore=R.tag.value.display.value.Lore.value.value,p.addItem(M,h+27))):Q.find((e=>e.position==h))||Q.find((e=>e.position==h+9))||Q.find((e=>e.position==h+18))||Q.find((e=>e.position==h+27))?(le.meta="9",le.displayName=`Slot ${h+1}: §aReady`):(le.meta="8",le.displayName=`Slot ${h+1}: §cEmpty`),Q[Q.length]={item:le,position:36+h}}p.addItems(Q);var te=new u(262);te.displayName="§aNext Page",te.lore=["§ePage 2"],p.addItem(te,p.slotCount-4);break;case 6:for(var X of(p=new c(v.CONTAINER,`§3Stats §8- Wardrobe Of §6${T}`,54),Q=[],t.data.slice(36)))X.id&&(Z=new u(X.id.value,X.Count.value),X.Damage.value&&(Z.meta=X.Damage.value),Z.displayName=X.tag.value.display.value.Name.value,Z.lore=X.tag.value.display.value.Lore.value.value,Q[Q.length]={item:Z,position:(t.data.indexOf(X)-36).toString()});for(h=0;h<9;h++)le=new u(351),t.equipped==h+9+1?(le.meta="10",le.displayName=`Slot ${h+1}: §aEquipped`,S=t.current[3],_=t.current[2],P=t.current[1],R=t.current[0],S?.id&&(L=new u(S.id.value,S.Count.value),S.Damage.value&&(L.meta=S.Damage.value),L.displayName=S.tag.value.display.value.Name.value,L.lore=S.tag.value.display.value.Lore.value.value,p.addItem(L,h)),_?.id&&(E=new u(_.id.value,_.Count.value),_.Damage.value&&(E.meta=_.Damage.value),E.displayName=_.tag.value.display.value.Name.value,E.lore=_.tag.value.display.value.Lore.value.value,p.addItem(E,h+9)),P?.id&&(A=new u(P.id.value,P.Count.value),_.Damage.value&&(A.meta=P.Damage.value),A.displayName=P.tag.value.display.value.Name.value,A.lore=P.tag.value.display.value.Lore.value.value,p.addItem(A,h+18)),R?.id&&(M=new u(R.id.value,R.Count.value),_.Damage.value&&(M.meta=R.Damage.value),M.displayName=R.tag.value.display.value.Name.value,M.lore=R.tag.value.display.value.Lore.value.value,p.addItem(M,h+27))):Q.find((e=>e.position==h))||Q.find((e=>e.position==h+9))||Q.find((e=>e.position==h+18))||Q.find((e=>e.position==h+27))?(le.meta="9",le.displayName=`Slot ${h+9+1}: §aReady`):(le.meta="8",le.displayName=`Slot ${h+9+1}: §cEmpty`),Q[Q.length]={item:le,position:36+h};p.addItems(Q);var ne=new u(262);ne.displayName="Previous Page",ne.lore=["§ePage 1"],p.addItem(ne,p.slotCount-6);break;case 7:for(var X of(p=new c(v.CONTAINER,`§3Stats §8- Personal Vault Of §6${T}`,36),Q=[],t))X.id&&(Z=new u(X.id.value,X.Count.value),X.Damage.value&&(Z.meta=X.Damage.value),Z.displayName=X.tag.value.display.value.Name.value,Z.lore=X.tag.value.display.value.Lore.value.value,Q[Q.length]={item:Z,position:t.indexOf(X).toString()});p.addItems(Q);break;default:p=new c(v.CONTAINER,"§cERROR",9)}var re=new u(399);re.displayName="§6Reload",p.addItem(re,p.slotCount-9);const ie=new u(166);return ie.displayName="§cClose",p.addItem(ie,p.slotCount-5),p.on("click",(async e=>{if(0==e.mode){var o=e?.raw?.item?.nbtData?.value?.display?.value?.Name?.value,r=e?.raw?.item?.nbtData?.value?.display?.value?.Lore?.value?.value??[];switch(e.slot){case p.slotCount-5:p.close(i),a.display(i);break;case p.slotCount-9:p.close(i),i.sendMessage("Reloading..."),(await b(a,l,d,i,T,s)).display(i);break;default:if(o){if(o.endsWith("View Inventories")){p.close(i),(await b(p,2,Object.values(t.members).find((e=>e.username==r[1].split("§6")[1])),i,r[1].split("§6")[1])).display(i);break}if(o.endsWith("View Inventory")&&!r[1]?.includes("OFF")){p.close(i),(await b(p,3,await n(t.inv_contents.data),i,T)).display(i);break}if(o.endsWith("View Accessory Bag")&&!r[1]?.includes("OFF")){p.close(i),(await b(p,4,await n(t.talisman_bag.data),i,T)).display(i);break}if(o.endsWith("View Wardrobe")&&!r[1]?.includes("OFF")){p.close(i),(await b(p,5,{data:await n(t.wardrobe_contents.data),equipped:t.wardrobe_equipped_slot,current:await n(t.inv_armor.data)},i,T)).display(i);break}if(o.includes("Previous Page")||o.includes("Next Page")){p.close(i),(await b(a,o.includes("Previous Page")?5:6,d,i,T)).display(i);break}if(o.endsWith("View Personal Vault")&&!r[1]?.includes("OFF")){p.close(i),(await b(p,7,await n(t.personal_vault_contents.data),i,T)).display(i);break}}e.cancel(i.client)}}else e.cancel(i.client)})),p}async function I(a){var{name:o,id:l}=await f(a);if(a=g.player,!o||!l)return w("This Player Doesn't Exist!");var{profiles:t}=await m(`/skyblock/profiles?uuid=${l}`);t=(t=t.map((e=>({profile:e.profile_id,name:e.cute_name,last_save:e.members[l].last_save}))).sort(((e,a)=>e.last_save<a.last_save?1:e.last_save>a.last_save?-1:0)).map((e=>t.find((a=>a.profile_id==e.profile))))).map((e=>0==t.indexOf(e)?{...e,current:!0}:{...e,current:!1}));const n=new c(v.CONTAINER,`§3Stats §8- §6${o}`,54),r=new u(166);r.displayName="§cClose";const i=new u(137);i.displayName="§3§lUUID",i.lore=["","§rThe §3UUID §rFor This Player","",`§6${l}`,""];var s=t.map((e=>{var a=new u(339);return a.displayName=`§2${e.cute_name}`,a.lore=["",`§6${o}§r's Profile: §3${e.cute_name}`,...e.current?["","§6CURRENT",""]:[""]],a}));function d(){switch(s.length){case 1:return[{item:s[0],position:13}];case 2:return[{item:s[0],position:12},{item:s[1],position:14}];case 3:return[{item:s[0],position:11},{item:s[1],position:13},{item:s[2],position:15}];case 4:return[{item:s[0],position:10},{item:s[1],position:12},{item:s[2],position:14},{item:s[3],position:16}];case 5:return[{item:s[0],position:9},{item:s[1],position:11},{item:s[2],position:13},{item:s[3],position:15},{item:s[4],position:17}];case 6:return T.warn(`SkyblockStats | parseProfileItems() ERROR | Inputted Data:\n\n${JSON.stringify(s)}\n\nWith Length: 6`),[{item:s[0],position:10},{item:s[1],position:11},{item:s[2],position:12},{item:s[3],position:14},{item:s[4],position:15},{item:s[5],position:16}];case 7:return T.warn(`SkyblockStats | parseProfileItems() ERROR | Inputted Data:\n\n${JSON.stringify(s)}\n\nWith Length: 7`),[{item:s[0],position:10},{item:s[1],position:11},{item:s[2],position:12},{item:s[3],position:13},{item:s[4],position:14},{item:s[5],position:15},{item:s[6],position:16}];case 8:return T.warn(`SkyblockStats | parseProfileItems() ERROR | Inputted Data:\n\n${JSON.stringify(s)}\n\nWith Length: 8`),[{item:s[0],position:9},{item:s[1],position:10},{item:s[2],position:11},{item:s[3],position:12},{item:s[4],position:14},{item:s[5],position:15},{item:s[6],position:16},{item:s[7],position:17}];case 9:return T.warn(`SkyblockStats | parseProfileItems() ERROR | Inputted Data:\n\n${JSON.stringify(s)}\n\nWith Length: 9`),[{item:s[0],position:9},{item:s[1],position:10},{item:s[2],position:11},{item:s[3],position:12},{item:s[4],position:13},{item:s[5],position:14},{item:s[6],position:15},{item:s[7],position:16},{item:s[8],position:17}];default:return T.error(`parseProfileItems() ERROR | HANDLED BY DEFAULT | Inputted Data:\n\n${JSON.stringify(s)}\n\nWith Length: ${s.length}`),[{item:s[0],position:9},{item:s[1],position:10},{item:s[2],position:11},{item:s[3],position:12},{item:s[4],position:13},{item:s[5],position:14},{item:s[6],position:15},{item:s[7],position:16},{item:s[8],position:17}]}}n.addItems([{item:i,position:45},{item:r,position:49},...d()]);const p=(await m(`/status?uuid=${l}`))?.session;if(p){var y=new u(35);p.online?(y.meta=5,y.displayName="§a§lONLINE",y.lore=[""],p.gameType&&y.lore.push(`§rGame: §6${e(p.gameType)}`),p.mode&&y.lore.push(`§rMode: §6${e(p.mode)}`),p.map&&y.lore.push(`§rMap: §6${e(p.map)}`)):(y.meta=14,y.displayName="§c§lOFFLINE"),n.addItem(y,n.slotCount-1)}return n.on("click",(async e=>{if(0==e.mode)switch(e.slot){case 49:n.close(a);break;default:var r=d();if(r.find((a=>a.position==e.slot))){n.close(a),(await b(n,1,t[r.indexOf(r.find((a=>a.position==e.slot)))],a,o,l)).display(a);break}e.cancel(a.client)}else e.cancel(a.client)})),n}g.onTriggered=async(e,a)=>{var o=a[0]??"help",l=a[1]??null;switch(o){case"help":player.sendMessage(h);break;case"stats":if(!l){w("§cRequires §6Player §cInput§6: §r(§6/sb stats §3player§r)");break}(await I(l)).display(g.player);break;case"purse":l||(l=g.player.client.username);var{name:t,id:n}=await f(l);if(!t||!n)return w("This Player Doesn't Exist!");var{profiles:r}=await m(`/skyblock/profiles?uuid=${n}`);r=r.map((e=>({profile:e.profile_id,name:e.cute_name,last_save:e.members[n].last_save}))).sort(((e,a)=>e.last_save<a.last_save?1:e.last_save>a.last_save?-1:0)).map((e=>r.find((a=>a.profile_id==e.profile)))),r=r.map((e=>0==r.indexOf(e)?{...e,current:!0}:{...e,current:!1}));var i=r.find((e=>e.current));w(`§6§l${t}§r§3's Purse On §2§l${i.cute_name}§r§3: §e${(Math.round(10*i.members[Object.keys(i.members).find((e=>e==n))].coin_purse)/10).toLocaleString()}`);break;default:Object.keys(N).includes(o)?w("Whoops, Something Went Wrong, That Command Doesn't Seem To Work..."):w("Nah Fam That Ain't A Command §l§6:/")}},registerCommand(g),registerPlugin({name:"Skyblock",description:"Skyblock Helper | `/skyblock` `/sb`",version:"1.8.4",author:"TBHGodPro"})})();