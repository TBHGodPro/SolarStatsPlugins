(()=>{var e=[],a={};function t(e){return{uuid:e}}async function r(e){var t=a[e];return t||(t=player.connectedPlayers.find((a=>a.name==e))?.uuid),t||(t=(await fetch(`https://api.mojang.com/users/profiles/minecraft/${e}`)).id),t}var i=toolbox.getConfigSync().modules.PartyView;const l=new toolbox.Item(397);l.meta=3,l.displayName="§rParty View",l.lore=["","§7Use The Lunar Client Team View","§7Mod To See Your Party Members","","§7Current: §"+(i?"aEnabled":"cDisabled")];const s=new toolbox.PlayerModule("Party View","View Your Party Members With LC Team View",l,"PartyView");s.customCode=()=>{player.proxy.on("incoming",(async(l,s,n,o)=>{if("chat"==s.name){var m=JSON.parse(l.message);m.extra??=[];var y=[m.text,...m.extra.map((e=>e.text))].join("");if(y.endsWith("joined the party.")){p=(p=y.split(" ")).splice(p[0].startsWith("[")?1:0,p.length-(p[0].startsWith("[")?4:3)).join(" "),e.push(p);var c=await r(p);if(a[p]=c,i){if(!c)return;player.lcPlayer?.addTeammate(t(c))}}if(y.endsWith("left the party.")&&!y.startsWith("You")&&(p=(p=y.split(" ")).splice(p[0].startsWith("[")?1:0,p.length-(p[0].startsWith("[")?4:3)).join(" "),e=e.filter((e=>e!=p)),delete a[p],i)){if(!(c=await r(p)))return;player.lcPlayer?.removeTeammate(t(c))}if((y.includes("has disbanded the party!")||y.includes("You left the party."))&&(e=[],a={},player.lcPlayer?.removeAllTeammates()),y.includes("You have joined")&&y.includes("party!")&&setTimeout((()=>player.executeCommand("/party list")),1e3),y.includes("Party Leader:")&&(p=(p=y.split(" ")).splice(p[0].startsWith("[")?4:3,p.length-(p[0].startsWith("[")?5:4)).join(" "),e=[],player.lcPlayer?.removeAllTeammates(),e.push(p),c=await r(p),a[p]=c,i)){if(!c)return;player.lcPlayer?.addTeammate(t(c))}if(y.includes("Party Moderators:")||y.includes("Party Members:")){var d=y.split(" ");for(var p of(d=d.splice(2,d.length).join(" ").split("● ").map((e=>e.split(" ").splice(d[0].startsWith("[")?2:1,d.length-(d[0].startsWith("[")?2:1)).join(" "))),e.push(d),d))c=await r(p),a[p]=c;if(i)for(var p of d){if(!(c=await r(p)))return;player.lcPlayer?.addTeammate(t(c))}y.includes("Party Members:")&&(a=Object.keys(a).filter((a=>e.includes(a))).map((e=>a[e])))}y.includes("You are not currently in a party.")&&(e=[],a={},player.lcPlayer?.removeAllTeammates())}}))},s.onConfigChange=async a=>{if(i=a)for(var l of(player.lcPlayer?.removeAllTeammates(),e)){var s=await r(l);if(!s)return;player.lcPlayer?.addTeammate(t(s))}else player.lcPlayer?.removeAllTeammates()},s.onLocationUpdate=()=>{setTimeout((()=>{i&&(player.lcPlayer?.removeAllTeammates(),setTimeout((async()=>{for(var a of e){var i=await r(a);if(!i)return;player.lcPlayer?.addTeammate(t(i))}}),500))}),1e3)},player.listener.on("player_join",((a,r)=>{i&&e.includes(r)&&a&&player.lcPlayer?.addTeammate(t(a))})),registerPlayerModule(s),registerPlugin({name:"Party View",description:"View Your Party Members With LC Team View | `/ss`",version:"1.4.3",author:"TBHGodPro"})})();