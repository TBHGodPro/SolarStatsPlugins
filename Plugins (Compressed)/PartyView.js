(()=>{const e=e=>player.connectedPlayers.find((a=>a.name==e))?.uuid;var a=null,t=toolbox.getConfigSync(),r=[];const l=new toolbox.Item(4);l.displayName="§rParty View",l.lore=["","§7Use The Lunar Client Team View","§7Mod To See Your Party Members","","§7Current: §"+(t.modules.PartyView?"aEnabled":"cDisabled")];const i=new toolbox.PlayerModule("Party View","View Your Party Members With LC Team View",l,"PartyView");i.customCode=()=>{player.proxy.on("incoming",((a,l,i,s)=>{if("chat"==l.name){var o=JSON.parse(a.message);o.extra??=[];var n=[o.text,...o.extra.map((e=>e.text))].join("");if(n.endsWith("joined the party.")&&(m=(m=n.split(" ")).splice(m[0].startsWith("[")?1:0,m.length-(m[0].startsWith("[")?4:3)).join(" "),r.push(m),t.modules.PartyView)){if(!(d=e(m)))return;player.lcPlayer?.addTeammate(d)}if(n.endsWith("left the party.")&&!n.startsWith("You")&&(m=(m=n.split(" ")).splice(m[0].startsWith("[")?1:0,m.length-(m[0].startsWith("[")?4:3)).join(" "),r=r.filter((e=>e!=m)),t.modules.PartyView)){if(!(d=e(m)))return;player.lcPlayer?.removeTeammate(d)}if((n.includes("has disbanded the party!")||n.includes("You left the party."))&&(r=[],player.lcPlayer?.removeAllTeammates()),n.includes("You have joined")&&n.includes("party!")&&setTimeout((()=>player.executeCommand("/p list")),1e3),n.includes("Party Leader:")&&(m=(m=n.split(" ")).splice(m[0].startsWith("[")?4:3,m.length-(m[0].startsWith("[")?5:4)).join(" "),r=[],player.lcPlayer?.removeAllTeammates(),r.push(m),t.modules.PartyView)){if(!(d=e(m)))return;player.lcPlayer?.addTeammate(d)}if(n.includes("Party Moderators:")||n.includes("Party Members:")){var y=n.split(" ");if(y=y.splice(2,y.length).join(" ").split("● ").map((e=>e.split(" ").splice(y[0].startsWith("[")?2:1,y.length-(y[0].startsWith("[")?2:1)).join(" "))),(r=[]).push(y),t.modules.PartyView)for(var m of y){var d;if(!(d=e(m)))return;player.lcPlayer?.addTeammate(d)}}n.includes("You are not currently in a party.")&&(r=[],player.lcPlayer?.removeAllTeammates())}})),setInterval((async()=>{a=t,t=await toolbox.getConfig(),JSON.stringify(a)!=JSON.stringify(t)&&(t.modules.PartyView?(player.lcPlayer?.removeAllTeammates(),r.forEach((a=>{var t=e(a);t&&player.lcPlayer?.addTeammate(t)}))):player.lcPlayer?.removeAllTeammates())}),500)},i.onLocationUpdate=()=>{setTimeout((()=>{t.modules.PartyView&&(player.lcPlayer?.removeAllTeammates(),setTimeout((()=>{r.forEach((a=>{var t=e(a);t&&player.lcPlayer?.addTeammate(t)}))}),500))}),1e3)},player.listener.on("player_join",((e,a)=>{t.modules.PartyView&&r.includes(a)&&e&&player.lcPlayer?.addTeammate(e)})),registerPlayerModule(i),registerPlugin({name:"Party View",description:"View Your Party Members With LC Team View | `/ss`",version:"1.4.1",author:"TBHGodPro"})})();